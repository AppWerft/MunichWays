module.exports=function(_permissions,_cb,_alert){



























function handleRequest(){
Ti.Android.requestPermissions(permissions,function(_e){
_e.success?
_cb.onOK():

_cb.onError("Error","Permission not granted");
});
}if("android"!=Ti.Platform.osname)return void _cb.onOK();var permissions=(Array.isArray(_permissions)?_permissions:[_permissions]).map(function(perm){return perm.match(/^android\.permission\./)?perm:"android.permission."+perm}),grantedpermissions=0;if(permissions.forEach(function(perm){Ti.Android.hasPermission(perm)&&grantedpermissions++}),!(grantedpermissions<permissions.length))_cb.onOK();else if(_alert){var dialog=Ti.UI.createAlertDialog({message:_alert.message,ok:L("OK"),title:_alert.title});dialog.show(),dialog.addEventListener("click",handleRequest)}else handleRequest();


};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoZWNrUGVybWlzc2lvbnMuanMiXSwibmFtZXMiOlsibW9kdWxlIiwiZXhwb3J0cyIsIl9wZXJtaXNzaW9ucyIsIl9jYiIsIl9hbGVydCIsImhhbmRsZVJlcXVlc3QiLCJUaSIsIkFuZHJvaWQiLCJyZXF1ZXN0UGVybWlzc2lvbnMiLCJwZXJtaXNzaW9ucyIsIl9lIiwic3VjY2VzcyIsIm9uT0siLCJvbkVycm9yIiwiUGxhdGZvcm0iLCJvc25hbWUiLCJBcnJheSIsImlzQXJyYXkiLCJtYXAiLCJwZXJtIiwibWF0Y2giLCJncmFudGVkcGVybWlzc2lvbnMiLCJmb3JFYWNoIiwiaGFzUGVybWlzc2lvbiIsImxlbmd0aCIsImRpYWxvZyIsIlVJIiwiY3JlYXRlQWxlcnREaWFsb2ciLCJtZXNzYWdlIiwib2siLCJMIiwidGl0bGUiLCJzaG93IiwiYWRkRXZlbnRMaXN0ZW5lciJdLCJtYXBwaW5ncyI6IkFBQUFBLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQixTQUFTQyxZQUFULENBQXVCQyxHQUF2QixDQUE0QkMsTUFBNUIsQ0FBb0M7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUE0QnBELFFBQVNDLENBQUFBLGFBQVQsRUFBeUI7QUFDeEJDLEVBQUUsQ0FBQ0MsT0FBSCxDQUFXQyxrQkFBWCxDQUE4QkMsV0FBOUIsQ0FBMkMsU0FBU0MsRUFBVCxDQUFhO0FBQ25EQSxFQUFFLENBQUNDLE9BRGdEO0FBRXREUixHQUFHLENBQUNTLElBQUosRUFGc0Q7O0FBSXREVCxHQUFHLENBQUNVLE9BQUosQ0FBWSxPQUFaLENBQW9CLHdCQUFwQixDQUpzRDtBQUt2RCxDQUxELENBRHdCO0FBT3hCLENBbENELEdBQTBCLFNBQXRCLEVBQUFQLEVBQUUsQ0FBQ1EsUUFBSCxDQUFZQyxNQUFoQixDQUVDLFdBREFaLENBQUFBLEdBQUcsQ0FBQ1MsSUFBSixFQUNBLENBSG1ELEdBS2hESCxDQUFBQSxXQUFXLENBQUcsQ0FBQ08sS0FBSyxDQUFDQyxPQUFOLENBQWNmLFlBQWQsRUFBOEJBLFlBQTlCLENBQTZDLENBQUNBLFlBQUQsQ0FBOUMsRUFBOERnQixHQUE5RCxDQUFrRSxTQUFTQyxJQUFULENBQWUsQ0FDbEcsTUFBUUEsQ0FBQUEsSUFBSSxDQUFDQyxLQUFMLENBQVcsd0JBQVgsQ0FBRCxDQUF5Q0QsSUFBekMsQ0FBZ0Qsc0JBQXdCQSxJQUMvRSxDQUZpQixDQUxrQyxDQVFoREUsa0JBQWtCLENBQUcsQ0FSMkIsQ0FlcEQsR0FOQVosV0FBVyxDQUFDYSxPQUFaLENBQW9CLFNBQVNILElBQVQsQ0FBZSxDQUU5QmIsRUFBRSxDQUFDQyxPQUFILENBQVdnQixhQUFYLENBQXlCSixJQUF6QixDQUY4QixFQUdqQ0Usa0JBQWtCLEVBRW5CLENBTEQsQ0FNQSxHQUFJQSxrQkFBa0IsQ0FBR1osV0FBVyxDQUFDZSxNQUFyQyxFQVlDckIsR0FBRyxDQUFDUyxJQUFKLEdBWkQsSUFDQyxJQUFJUixNQUFKLENBQVksQ0FDWCxHQUFJcUIsQ0FBQUEsTUFBTSxDQUFHbkIsRUFBRSxDQUFDb0IsRUFBSCxDQUFNQyxpQkFBTixDQUF3QixDQUNwQ0MsT0FBTyxDQUFHeEIsTUFBTSxDQUFDd0IsT0FEbUIsQ0FFcENDLEVBQUUsQ0FBR0MsQ0FBQyxDQUFDLElBQUQsQ0FGOEIsQ0FHcENDLEtBQUssQ0FBRzNCLE1BQU0sQ0FBQzJCLEtBSHFCLENBQXhCLENBQWIsQ0FLQU4sTUFBTSxDQUFDTyxJQUFQLEVBTlcsQ0FPWFAsTUFBTSxDQUFDUSxnQkFBUCxDQUF3QixPQUF4QixDQUFnQzVCLGFBQWhDLENBQ0EsQ0FSRCxJQVNDQSxDQUFBQSxhQUFhOzs7QUFhZixDIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihfcGVybWlzc2lvbnMsIF9jYiwgX2FsZXJ0KSB7XG5cdGlmIChUaS5QbGF0Zm9ybS5vc25hbWUgIT0gJ2FuZHJvaWQnKSB7XG5cdFx0X2NiLm9uT0soKTtcblx0XHRyZXR1cm47XG5cdH1cblx0dmFyIHBlcm1pc3Npb25zID0gKEFycmF5LmlzQXJyYXkoX3Blcm1pc3Npb25zKSA/IF9wZXJtaXNzaW9ucyA6IFtfcGVybWlzc2lvbnNdKS5tYXAoZnVuY3Rpb24ocGVybSkge1xuXHRcdHJldHVybiAocGVybS5tYXRjaCgvXmFuZHJvaWRcXC5wZXJtaXNzaW9uXFwuLykpID8gcGVybSA6ICdhbmRyb2lkLnBlcm1pc3Npb24uJyArIHBlcm07XG5cdH0pO1xuXHR2YXIgZ3JhbnRlZHBlcm1pc3Npb25zID0gMDtcblx0cGVybWlzc2lvbnMuZm9yRWFjaChmdW5jdGlvbihwZXJtKSB7XG5cdFx0XG5cdFx0aWYgKFRpLkFuZHJvaWQuaGFzUGVybWlzc2lvbihwZXJtKSlcblx0XHRcdGdyYW50ZWRwZXJtaXNzaW9ucysrO1xuXG5cdH0pO1xuXHRpZiAoZ3JhbnRlZHBlcm1pc3Npb25zIDwgcGVybWlzc2lvbnMubGVuZ3RoKSB7XG5cdFx0aWYgKF9hbGVydCkge1xuXHRcdFx0dmFyIGRpYWxvZyA9IFRpLlVJLmNyZWF0ZUFsZXJ0RGlhbG9nKHtcblx0XHRcdFx0bWVzc2FnZSA6IF9hbGVydC5tZXNzYWdlLFxuXHRcdFx0XHRvayA6IEwoJ09LJyksXG5cdFx0XHRcdHRpdGxlIDogX2FsZXJ0LnRpdGxlXG5cdFx0XHR9KTtcblx0XHRcdGRpYWxvZy5zaG93KCk7XG5cdFx0XHRkaWFsb2cuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsaGFuZGxlUmVxdWVzdCk7XG5cdFx0fSBlbHNlXG5cdFx0XHRoYW5kbGVSZXF1ZXN0KCk7XG5cdH0gZWxzZVxuXHRcdF9jYi5vbk9LKCk7XG5cdGZ1bmN0aW9uIGhhbmRsZVJlcXVlc3QoKSB7XG5cdFx0VGkuQW5kcm9pZC5yZXF1ZXN0UGVybWlzc2lvbnMocGVybWlzc2lvbnMsIGZ1bmN0aW9uKF9lKSB7XG5cdFx0XHRpZiAoX2Uuc3VjY2Vzcylcblx0XHRcdFx0X2NiLm9uT0soKTtcblx0XHRcdGVsc2Vcblx0XHRcdFx0X2NiLm9uRXJyb3IoXCJFcnJvclwiLFwiUGVybWlzc2lvbiBub3QgZ3JhbnRlZFwiKTtcblx0XHR9KTtcblx0fVxuXG5cdHJldHVybjtcbn07XG4iXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9mdWVyc3QvRG9jdW1lbnRzL01MZWFybmluZy9NdW5pY2hXYXlzL1Jlc291cmNlcy9saWJzIn0=
